# load data
library(data.table)
library(e1071)
library(pROC)
library(ranger)
setwd("C:/Users/Subho/Dropbox/Blood-brain/")
data1 = data.table(read.csv("Data/All descriptors  - BBB.csv"))
data2 = fread("Data/BBB set 2.csv")
data3 = fread("Data/BBB-415.csv")
names1 = data1[,Source.File]
for(rep in c(".mol2"," ","-","_")){
names1 = gsub(rep,"",names1)
}
data1 = data1[,Source.File := toupper(names1)]
data11 = data.frame(cbind(data1,data2))
# remove NA cols
NA.counts = as.numeric(apply(data11, 2, function(x) sum(is.na(x))))
data11 = data11[,which(NA.counts==0)]
## add to basak data
names2 = data3[,Name]
for(rep in c(".mol2"," ","-","_")){
names2 = gsub(rep,"",names2)
}
data3 = data3[,Name := toupper(names2)]
basak2 = fread("Data/BBB-413-Polly.csv")
names(basak2)[1] = "No."
basak3 = fread("Data/BBB-413-Triplet.csv")
names(basak3)[1] = "No."
basak = Reduce(merge, list(data3, basak2, basak3))
# remove NA
NA.rows = apply(basak,1,function(x) -99 %in% x)
basak = basak[NA.rows==0]
basak = basak[Name %in% data4$Source.File]
basak[, Class01 := 1]
basak[Class=="n", Class01 := 0]
sumary(as.factor(basak$Class01))
summary(as.factor(basak$Class01))
